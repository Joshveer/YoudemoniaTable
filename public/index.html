<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opportunity Spreadsheet</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-purple-50 p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header with logo -->
        <div class="flex justify-center mb-8">
            <!-- Logo -->
            <div class="w-20 h-20">
                <img src="logo.webp" alt="Logo" class="w-full h-full object-contain">
            </div>
        </div>
        
        <!-- Centered search bar -->
        <div class="flex justify-center mb-8">
            <div class="w-full md:w-2/3 relative">
                <input type="text" id="searchInput" placeholder="Search by Name, Location, Age Group, or Industry" class="pl-10 pr-4 py-2 border rounded-full w-full bg-white">
                <svg class="w-5 h-5 text-gray-500 absolute left-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
            </div>
        </div>
    
        <!-- Buttons and Sort dropdowns -->
        <div class="flex flex-wrap justify-center items-center gap-5 mb-8">
            <button id="allOpportunities" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-full text-sm">All Opportunities</button>
            <button id="favorites" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-full text-sm">Favorites</button>
            <button id="exportFavorites" class="bg-green-700 text-white font-bold px-4 py-2 rounded-full text-sm">Export Favorites</button>
            
            <div class="relative">
                <select id="industryDropdown" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-full text-sm appearance-none pr-8 cursor-pointer">
                    <option value="">Sort by Industry</option>
                    <option value="Technology">Technology</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Education">Education</option>
                    <option value="Environmental">Environmental</option>
                    <option value="Non-profit">Non-profit</option>
                    <option value="Arts">Arts</option>
                    <option value="Social Services">Social Services</option>
                </select>
                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </div>
            </div>
            
            <div class="relative">
                <select id="ageGroupDropdown" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-full text-sm appearance-none pr-8 cursor-pointer">
                    <option value="">Sort by Age Group</option>
                    <option value="Elementary">Elementary School</option>
                    <option value="Middle School">Middle School</option>
                    <option value="High School">High School</option>
                    <option value="College">College</option>
                    <option value="18+">18+ Only</option>
                    <option value="All Ages">All Ages</option>
                </select>
                <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                    <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </div>
            </div>
        </div>

        <!-- Spreadsheet table -->
        <div class="bg-white rounded-lg shadow overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-purple-700">
                    <tr>
                        <th class="px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider">Favorite</th>
                        <th class="px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider">Opportunity Name</th>
                        <th class="px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider">Organization</th>
                        <th class="px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider">Location</th>
                        <th class="px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider">Date/Time</th>
                        <th class="px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider">Tags</th>
                        <th class="px-4 py-3 text-left text-xs font-bold text-white uppercase tracking-wider">More Info</th>
                    </tr>
                </thead>
                <tbody id="opportunityTableBody" class="bg-white divide-y divide-gray-200">
                    <!-- Opportunities will be dynamically added here -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="mt-4 flex justify-between items-center">
            <button id="prevPage" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-full text-sm">Previous</button>
            <span id="pageInfo">Page 1 of 1</span>
            <button id="nextPage" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-full text-sm">Next</button>
        </div>
    </div>

    <!-- Modal for opportunity details -->
    <div id="detailsModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
            <div id="modalContent"></div>
            <div class="text-center mt-4">
                <button id="closeModal" class="bg-purple-700 text-white font-bold px-4 py-2 rounded-full text-sm">Close</button>
            </div>
        </div>
    </div>

    <script>
        const opportunities = [
            { name: "Community Cleanup", organization: "Green Earth", location: "New York, NY", datetime: "08/15/2024 09:00 AM", tags: ["Environment", "Community"], ageGroup: "All Ages", industry: "Environmental Services" },
            { name: "Food Drive", organization: "Feeding America", location: "Los Angeles, CA", datetime: "09/01/2024 10:00 AM", tags: ["Charity", "Food"], ageGroup: "Adults", industry: "Non-profit" },
            { name: "Tech Workshop", organization: "Code for Good", location: "Chicago, IL", datetime: "08/22/2024 02:00 PM", tags: ["Education", "Technology"], ageGroup: "High School", industry: "Technology" },
            { name: "Art Exhibition", organization: "City Museum", location: "Houston, TX", datetime: "09/10/2024 11:00 AM", tags: ["Art", "Culture"], ageGroup: "All Ages", industry: "Arts" },
            { name: "Elderly Care Volunteer", organization: "SilverCare", location: "Miami, FL", datetime: "08/30/2024 10:00 AM", tags: ["Healthcare", "Community"], ageGroup: "18+", industry: "Healthcare" },
            { name: "Beach Cleanup", organization: "Ocean Guardians", location: "San Diego, CA", datetime: "09/05/2024 08:00 AM", tags: ["Environment", "Community"], ageGroup: "All Ages", industry: "Environmental Services" },
            { name: "Coding Bootcamp", organization: "Tech Futures", location: "Seattle, WA", datetime: "09/15/2024 09:00 AM", tags: ["Education", "Technology"], ageGroup: "College", industry: "Technology" },
            { name: "Homeless Shelter Support", organization: "Urban Hope", location: "Boston, MA", datetime: "08/25/2024 07:00 PM", tags: ["Charity", "Community"], ageGroup: "18+", industry: "Non-profit" },
            { name: "Wildlife Conservation", organization: "NatureFirst", location: "Denver, CO", datetime: "09/20/2024 06:00 AM", tags: ["Environment", "Animal Welfare"], ageGroup: "18+", industry: "Environmental Services" },
            { name: "Youth Mentorship Program", organization: "Future Leaders", location: "Atlanta, GA", datetime: "09/08/2024 03:00 PM", tags: ["Education", "Youth"], ageGroup: "High School", industry: "Education" },
            { name: "Local Theater Production", organization: "Community Players", location: "Portland, OR", datetime: "09/12/2024 07:00 PM", tags: ["Art", "Culture"], ageGroup: "All Ages", industry: "Arts" },
            { name: "Hunger Relief Initiative", organization: "Food for All", location: "Phoenix, AZ", datetime: "08/28/2024 11:00 AM", tags: ["Charity", "Food"], ageGroup: "18+", industry: "Non-profit" },
            { name: "Urban Gardening Project", organization: "Green Cities", location: "Austin, TX", datetime: "09/03/2024 08:30 AM", tags: ["Environment", "Community"], ageGroup: "All Ages", industry: "Environmental Services" },
            { name: "Literacy Program", organization: "Books for Life", location: "Washington, DC", datetime: "09/18/2024 04:00 PM", tags: ["Education", "Literacy"], ageGroup: "Elementary", industry: "Education" },
            { name: "Pet Adoption Fair", organization: "Happy Paws", location: "San Francisco, CA", datetime: "09/22/2024 10:00 AM", tags: ["Animal Welfare", "Community"], ageGroup: "All Ages", industry: "Social Services" }
        ];

        const itemsPerPage = 10;
        let currentPage = 1;
        let filteredOpportunities = [...opportunities];
        let favoriteOpportunities = [];

        function toggleHeart(button, opp) {
            const isFavorite = button.textContent === '❤️';
            button.textContent = isFavorite ? '🤍' : '❤️';
            
            if (isFavorite) {
                favoriteOpportunities = favoriteOpportunities.filter(fav => fav.name !== opp.name);
            } else {
                favoriteOpportunities.push(opp);
            }
        }

        function renderOpportunities(page) {
            const tableBody = document.getElementById('opportunityTableBody');
            tableBody.innerHTML = '';

            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageOpportunities = filteredOpportunities.slice(start, end);

            pageOpportunities.forEach(opp => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-purple-50 transition-colors duration-150 ease-in-out';
                row.innerHTML = `
                    <td class="px-4 py-4 whitespace-nowrap">
                        <button class="text-xl focus:outline-none text-red-500" onclick='toggleHeart(this, ${JSON.stringify(opp)})'>
                            ${favoriteOpportunities.some(fav => fav.name === opp.name) ? '❤️' : '🤍'}
                        </button>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap">${opp.name}</td>
                    <td class="px-4 py-4 whitespace-nowrap">${opp.organization}</td>
                    <td class="px-4 py-4 whitespace-nowrap">${opp.location}</td>
                    <td class="px-4 py-4 whitespace-nowrap">${opp.datetime}</td>
                    <td class="px-4 py-4">
                        <div class="flex flex-wrap gap-1">
                            ${opp.tags.map(tag => `<span class="inline-block bg-purple-200 rounded-full px-2 py-1 text-xs font-semibold text-purple-700">${tag}</span>`).join('')}
                            <span class="inline-block bg-blue-200 rounded-full px-2 py-1 text-xs font-semibold text-blue-700">${opp.ageGroup}</span>
                            <span class="inline-block bg-green-200 rounded-full px-2 py-1 text-xs font-semibold text-green-700">${opp.industry}</span>
                        </div>
                    </td>
                    <td class="px-4 py-4 whitespace-nowrap">
                        <button class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-1 px-2 rounded text-xs" data-opportunity='${JSON.stringify(opp)}'>
                            View Details
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });

            updatePagination();
        }

        function updatePagination() {
            const totalPages = Math.ceil(filteredOpportunities.length / itemsPerPage);
            document.getElementById('pageInfo').textContent = `Page ${currentPage} of ${totalPages}`;
            document.getElementById('prevPage').disabled = currentPage === 1;
            document.getElementById('nextPage').disabled = currentPage === totalPages;
        }

        document.getElementById('prevPage').addEventListener('click', () => {
            if (currentPage > 1) {
                currentPage--;
                renderOpportunities(currentPage);
            }
        });

        document.getElementById('nextPage').addEventListener('click', () => {
            const totalPages = Math.ceil(filteredOpportunities.length / itemsPerPage);
            if (currentPage < totalPages) {
                currentPage++;
                renderOpportunities(currentPage);
            }
        });

        document.getElementById('searchInput').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            filteredOpportunities = opportunities.filter(opp => 
                opp.name.toLowerCase().includes(searchTerm) || 
                opp.location.toLowerCase().includes(searchTerm) ||
                opp.ageGroup.toLowerCase().includes(searchTerm) ||
                opp.industry.toLowerCase().includes(searchTerm) ||
                opp.organization.toLowerCase().includes(searchTerm)
            );
            currentPage = 1;
            renderOpportunities(currentPage);
        });

        document.getElementById('industryDropdown').addEventListener('change', function() {
            const selectedIndustry = this.value;
            if (selectedIndustry) {
                filteredOpportunities = opportunities.filter(opp => opp.industry === selectedIndustry);
            } else {
                filteredOpportunities = [...opportunities];
            }
            currentPage = 1;
            renderOpportunities(currentPage);
        });

        document.getElementById('ageGroupDropdown').addEventListener('change', function() {
            const selectedAgeGroup = this.value;
            if (selectedAgeGroup) {
                filteredOpportunities = opportunities.filter(opp => opp.ageGroup === selectedAgeGroup);
            } else {
                filteredOpportunities = [...opportunities];
            }
            currentPage = 1;
            renderOpportunities(currentPage);
        });

        document.getElementById('allOpportunities').addEventListener('click', function() {
            filteredOpportunities = [...opportunities];
            currentPage = 1;
            renderOpportunities(currentPage);
        });

        document.getElementById('favorites').addEventListener('click', function() {
            filteredOpportunities = [...favoriteOpportunities];
            currentPage = 1;
            renderOpportunities(currentPage);
        });

        document.getElementById('exportFavorites').addEventListener('click', function() {
            const csvContent = "data:text/csv;charset=utf-8," 
                + "Name,Organization,Location,Date/Time,Age Group,Industry,Tags\n"
                + favoriteOpportunities.map(opp => {
                    return `"${opp.name}","${opp.organization}","${opp.location}","${opp.datetime}","${opp.ageGroup}","${opp.industry}","${opp.tags.join(', ')}"`;
                }).join("\n");
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "favorite_opportunities.csv");
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        });

        document.addEventListener('click', function(e) {
            if (e.target && e.target.matches('button[data-opportunity]')) {
                const opp = JSON.parse(e.target.getAttribute('data-opportunity'));
                showDetails(opp);
            }
        });

        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('detailsModal').classList.add('hidden');
        });

        function showDetails(opp) {
            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <h2 class="text-xl font-bold mb-2">${opp.name}</h2>
                <p><strong>Organization:</strong> ${opp.organization}</p>
                <p><strong>Location:</strong> ${opp.location}</p>
                <p><strong>Date/Time:</strong> ${opp.datetime}</p>
                <p><strong>Age Group:</strong> ${opp.ageGroup}</p>
                <p><strong>Industry:</strong> ${opp.industry}</p>
                <p><strong>Tags:</strong> ${opp.tags.join(', ')}</p>
            `;
            document.getElementById('detailsModal').classList.remove('hidden');
        }

        // Initial render
        renderOpportunities(currentPage);
    </script>
</body>
</html>